"""
Точка входа проекта pharma_company.
Здесь мы демонстрируем работу основных классов и исключений.
"""

from pharma_company.finance.cards import БанковскаяКарта
from pharma_company.finance.payments import АнтифродПравила, ПлатёжСервис
from pharma_company.finance.accounts import УчётнаяЗапись
from pharma_company.core.company import ФармацевтическаяКомпания
from pharma_company.core.drug import Препарат, Производитель, СертификатКачества, СтандартКачества
from pharma_company import exceptions


def main():
    # Создаём компанию
    компания = ФармацевтическаяКомпания(id=1, название="ФармБел", лицензия_активна=True)

    # Производитель и препарат
    производитель = Производитель(id=10, название="БелМед", лицензия_активна=True, контакты={"email": "info@belmed.by"})
    препарат = Препарат(id=100, название="Анальгин", производитель=производитель, цена=5.0, требование_рецепта=False)
    сертификат = СертификатКачества(id=200, препарат_id=100, дата_выдачи="2025-01-01", срок_действия="2026-01-01", выдан=True)
    препарат.назначить_сертификат(сертификат)

    # Учётная запись и карта
    учёт = УчётнаяЗапись(логин="alex", хеш_пароля="12345", роль="менеджер")
    карта1 = БанковскаяКарта(номер="1111", баланс=1000.0, владелец=учёт)
    карта2 = БанковскаяКарта(номер="2222", баланс=500.0)

    # Платёжный сервис
    антифрод = АнтифродПравила(лимит=2000.0)
    сервис = ПлатёжСервис(антифрод=антифрод)

    # Демонстрация перевода
    try:
        print("Баланс до перевода:", карта1.баланс, карта2.баланс)
        сервис.перевод(карта1, карта2, 300.0)
        print("Баланс после перевода:", карта1.баланс, карта2.баланс)
    except Exception as e:
        print("Ошибка:", e)

    # Проверка лицензии компании
    try:
        компания.проверить_лицензию()
        print("Лицензия компании активна.")
    except ЗапретРегулятора as e:
        print("Ошибка лицензии:", e)

if __name__ == "__main__":
    main()
