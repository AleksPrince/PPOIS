from dataclasses import dataclass
from pharma_company.exceptions import *

@dataclass
class НастройкиОтпуска:
    """Настройки отпуска по рецепту и без."""
    требовать_рецепт: bool
    ограничение_количества: int
    уведомление_регулятору: bool

    def обновить(self, требовать: bool, лимит: int):
        """Обновляет настройки."""
        self.требовать_рецепт = требовать
        self.ограничение_количества = лимит

    def уведомить(self) -> bool:
        """Возвращает необходимость уведомления регулятора."""
        return self.уведомление_регулятору


@dataclass
class ПравилаОтпуска:
    """Правила отпуска для категорий препаратов."""
    категории: dict[str, НастройкиОтпуска]
    версия: int = 1

    def установить(self, категория: str, настройки: НастройкиОтпуска):
        """Устанавливает настройки для категории."""
        self.категории[категория] = настройки

    def повысить_версию(self):
        """Повышает версию правил."""
        self.версия += 1
